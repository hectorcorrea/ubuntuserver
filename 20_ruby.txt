# Install Ruby from source (via ruby-install)
#
# Reference: http://ryanbigg.com/2014/10/ubuntu-ruby-ruby-install-chruby-and-you/
 
# Download Ubuntu tools
sudo apt-get install build-essential
 
# Install ruby-install
wget -O ruby-install-0.5.0.tar.gz https://github.com/postmodern/ruby-install/archive/v0.5.0.tar.gz
tar -xzvf ruby-install-0.5.0.tar.gz
cd ruby-install-0.5.0/
sudo make install
 
ruby-install -V
 
 
# Install Ruby, pick one. This takes a while.
ruby-install ruby 2.1.5
ruby-install ruby 2.2.0


# Install chruby
#
# Reference: https://github.com/postmodern/chruby

# Download and install chruby
wget -O chruby-0.3.9.tar.gz https://github.com/postmodern/chruby/archive/v0.3.9.tar.gz
tar -xzvf chruby-0.3.9.tar.gz
cd chruby-0.3.9/
sudo make install
 

# Enable chruby system-wide
# Create file /etc/profile.d/chruby.sh with the following:
#
# This does NOT enable it for root in the init scripts
#
if [ -n "$BASH_VERSION" ] || [ -n "$ZSH_VERSION" ]; then
  source /usr/local/share/chruby/chruby.sh
fi


# For an individual user/session
# Add this at the end of ~/.bashrc
# 
# chruby.sh is the script that can be used to set the current ruby.
# auto.sh is only needed if you want to automatically switch to different versions of ruby base on .ruby_version 
source /usr/local/share/chruby/chruby.sh
source /usr/local/share/chruby/auto.sh
 

# To set a default version of ruby, create ~/.ruby-version with
ruby-2.2.0 
