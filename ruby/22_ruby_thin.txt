# Adding thin to the Sinatra web site.
#
# Add thin to your gem file
gem 'thin'
 

# and install it
bundle install
 

# create a rack file for the Sinatra app (config.ru)
require './server'
run Sinatra::Application
 

# http://code.macournoyer.com/thin/usage/
# use this to create a config file (3 servers, port 5000, 5001, and 5002)
thin config -C myapp.yml -s3 -p 5000
 
# start listening for connections on those ports
thin start -C myapp.yml
 
# to stop all three servers
thin stop -C myapp.yml
 

# If one or more of the thin processes die, thin is smart enough to route
# the calls to the ones that remain alive. The only thing that is not handled
# is when all of them die.
#
# I need to figure out a why to respawn thin if all of them die 
# (does upstart takes care of this?)