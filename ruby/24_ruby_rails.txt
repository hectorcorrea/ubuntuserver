# Set up my Rail app


# Install sqlite dev tools.
# (needed only the first time)
sudo apt-get install libsqlite3-dev


# Get the source code
cd
git clone https://github.com/hectorcorrea/hkrails.git


# Install gems locally.
cd ~/hkrails/
gem install bundler
bundle install --deployment


# Compile assets
bundle exec rake assets:precompile


# Migrate the DB
RAILS_ENV=production bundle exec rake db:migrate


# Setup environment variable SECRET_KEY_BASE_HKRAILS
export SECRET_KEY_BASE_HKRAILS=<secret value goes here>


# Run it (standalone)
RAILS_ENV=production bundle exec rails server


# Run it (via thin)
RAILS_ENV=production bundle exec thin start -C thin.yml
RAILS_ENV=production bundle exec thin stop -C thin.yml


# To update the site
cd ~/hkrails
git pull
bundle install --deployment
bundle exec rake assets:precompile
RAILS_ENV=production bundle exec rake db:migrate

